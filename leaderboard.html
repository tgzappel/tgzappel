<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaderboard | Grandmaster List</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav>
        <a href="index.html">LEVELS</a>
        <a href="leaderboard.html" class="active">LEADERBOARD</a>
    </nav>

    <div id="container">
        <h1 style="text-align: center; margin-bottom: 30px;">TOP PLAYERS</h1>
        
        <div id="leaderboard-list">
            </div>
    </div>

    <script src="./data.js"></script>

    <script>
        let leaderboard = [];

        function calculateLeaderboard() {
            if (!window.DATA || !window.DATA.players) return;

            leaderboard = DATA.players.map(player => {
                let totalPoints = 0;
                player.completions.forEach(id => {
                    const level = DATA.levels.find(l => l.id.toLowerCase() === id.toLowerCase());
                    if (level) totalPoints += level.points;
                });

                return {
                    name: player.name,
                    count: player.completions.length,
                    points: totalPoints
                };
            });

            leaderboard.sort((a, b) => b.points - a.points);
            renderLeaderboard();
        }

        function renderLeaderboard() {
            const lbList = document.getElementById('leaderboard-list');
            if (!lbList) return;

            if (leaderboard.length === 0) {
                lbList.innerHTML = `<p style="text-align:center; opacity:0.5;">No players found.</p>`;
                return;
            }

            lbList.innerHTML = leaderboard.map((player, index) => {
                // Determine a special color for Top 3
                let rankColor = "#fff";
                if(index === 0) rankColor = "#FFD700"; // Gold
                if(index === 1) rankColor = "#C0C0C0"; // Silver
                if(index === 2) rankColor = "#CD7F32"; // Bronze

                return `
                <div class="player-card">
                    <div class="player-rank" style="color:${rankColor}">#${index + 1}</div>
                    <div class="player-info">
                        <div class="player-name">${player.name}</div>
                        <div class="player-stats">${player.count} Levels Cleared</div>
                    </div>
                    <div class="player-points">${player.points.toLocaleString()} pts</div>
                </div>
                `;
            }).join('');
        }
    </script>
</body>
</html>
